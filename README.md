# A1. Задача про Монте-Карло

## Метод
Генерируются `N` равномерных точек в прямоугольнике `[L,R] × [B,T]` площадью `S_rect = (R - L) * (T - B)`.
Пусть `M` из них попали внутрь **всех трёх** окружностей. Тогда оценка площади:
```
S_hat = (M / N) * S_rect
```
Проверка «точка `(x, y)` внутри круга `(a, b, r)`»:
```
(x - a)^2 + (y - b)^2 <= r^2
```


### Выбор прямоугольника
- **narrow**:
  ```
  L = max(x_i - r_i),  R = min(x_i + r_i),
  B = max(y_i - r_i),  T = min(y_i + r_i).
  ```
  При это если `L >= R` или `B >= T` — общего тройного пересечения нет ⇒ `S_hat = 0`!

- **wide**:
  ```
  L = min(x_i - r_i),  R = max(x_i + r_i),
  B = min(y_i - r_i),  T = max(y_i + r_i).
  ```

## Данные из методички и точное значение
Файл `data/circles_alg.txt` должен содержать три строки `x y r` (десятичная точка):
```
1.0 1.0 1.0
1.5 2 1.11803398875
2 1.5 1.11803398875
```
Точная площадь:
```
S_exact = 0.25*pi + 1.25*arcsin(0.8) - 1 ≈ 0.9445171859
```

## Структура репозитория
```
A1-monte-carlo/
├─ src/
│  └─ a1i.cpp
│  └─ prog
├─ data/
│  └─ circles_alg.txt
├─ results/
│  └─ results.csv
├─ experiment/
│  ├─ график первого типа.png
│  └─ график второго типа.png
│  └─ Graphics_in_collab.ipynb (код можно посмотреть в Collab)
└─ script.sh
```

## Сборка и одиночный запуск
Также убедитесь, что вы находитесь в директории src! (cd src)
```bash
./prog --rect narrow --N 100000 --seed 123456 < data/circles_method.txt
```
Параметры:
- `--rect narrow/wide` — тип прямоугольника,
- `--N` — число точек,
- `--seed` — сид ГПСЧ

## Серийные прогоны
Скрипт `script.sh` создаёт `results/results.csv` с сериями для `narrow` и `wide` при фиксированном сид:


## Построение графиков
файл `Graphics_in_collab.ipynb` (pandas + matplotlib) читает `results/results.csv`, добавляет ошибки и сохраняет графики:


## Результаты и выводы
**Наблюдения:** по полученным кривым (seed=123456) линия `narrow` быстрее стабилизируется вокруг `S_exact`, а относительная ошибка у `narrow` при том же `N` ниже, чем у `wide`. На малых `N` разброс у `wide` выше из‑за ненужной площади прямоугольника.

**Вывод:**
1. Узкий прямоугольник существенно снижает разброс оценки; для той же точности требуется меньше точек.

## Codeforces A1i
- **ID посылки:** 347918674  

## Примечания
- Входной формат — три строки `x y r` (десятичный разделитель — точка)
- Для Codeforces координаты ограничены `[0,1]`; для LMS использованы координаты из методички

